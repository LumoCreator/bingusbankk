<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BingusBank ‚Äî –ú–æ–±–∏–ª—å–Ω—ã–π –±–∞–Ω–∫–∏–Ω–≥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com"></script>
    <script src="https://unpkg.com"></script>
    <style>
        :root { --orange-main: #FF6B00; }
        .bg-orange-bingus { background-color: var(--orange-main); }
        .text-orange-bingus { color: var(--orange-main); }
        .border-orange-bingus { border-color: var(--orange-main); }
        .card-gradient { background: linear-gradient(135deg, #FF6B00 0%, #FF9E5E 100%); }
        .blur-data { filter: blur(5px); transition: 0.3s; }
        .unblur { filter: blur(0); }
        body { background-color: #F8F9FA; font-family: 'Inter', sans-serif; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); align-items: center; justify-content: center; z-index: 50; }
        .active { display: flex; }
    </style>
</head>
<body>

<div id="app">
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loader" class="h-screen flex items-center justify-center bg-white">
        <div class="animate-bounce text-orange-bingus font-bold text-2xl">BingusBank...</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω—ã –í—Ö–æ–¥–∞ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="auth-screen" class="hidden h-screen flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-md">
            <h1 class="text-3xl font-bold text-center mb-8 text-orange-bingus">BingusBank</h1>
            
            <div id="login-form">
                <input type="email" id="login-email" placeholder="–ü–æ—á—Ç–∞" class="w-full p-4 mb-4 border rounded-2xl outline-none focus:border-orange-500">
                <input type="password" id="login-pass" placeholder="–ü–∞—Ä–æ–ª—å" class="w-full p-4 mb-6 border rounded-2xl outline-none focus:border-orange-500">
                <button onclick="handleLogin()" class="w-full bg-orange-bingus text-white py-4 rounded-full font-bold hover:opacity-90 transition">–í–æ–π—Ç–∏</button>
                <p class="text-center mt-4 text-gray-500">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <span onclick="toggleAuth(true)" class="text-orange-bingus cursor-pointer font-bold">–°–æ–∑–¥–∞—Ç—å</span></p>
            </div>

            <div id="register-form" class="hidden">
                <input type="text" id="reg-name" placeholder="–í–∞—à–µ –ò–º—è" class="w-full p-4 mb-4 border rounded-2xl outline-none focus:border-orange-500">
                <input type="email" id="reg-email" placeholder="–ü–æ—á—Ç–∞" class="w-full p-4 mb-4 border rounded-2xl outline-none focus:border-orange-500">
                <input type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å" class="w-full p-4 mb-6 border rounded-2xl outline-none focus:border-orange-500">
                <button onclick="handleRegister()" class="w-full bg-orange-bingus text-white py-4 rounded-full font-bold hover:opacity-90 transition">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <p class="text-center mt-4 text-gray-500">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <span onclick="toggleAuth(false)" class="text-orange-bingus cursor-pointer font-bold">–í–æ–π—Ç–∏</span></p>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="main-screen" class="hidden max-w-5xl mx-auto p-4 lg:p-8">
        <header class="flex justify-between items-center mb-8">
            <div>
                <h2 class="text-gray-500">–ü—Ä–∏–≤–µ—Ç,</h2>
                <h1 id="user-name-display" class="text-2xl font-bold">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
            </div>
            <button onclick="handleLogout()" class="bg-gray-200 px-6 py-2 rounded-full font-semibold hover:bg-gray-300">–í—ã–π—Ç–∏</button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- –ö–∞—Ä—Ç–∞ –∏ –ë–∞–ª–∞–Ω—Å -->
            <div class="lg:col-span-2">
                <div class="card-gradient p-8 rounded-[2rem] text-white shadow-2xl relative overflow-hidden mb-8">
                    <div class="flex justify-between items-start mb-12">
                        <span class="text-xl font-bold">Bingus Platinum</span>
                        <img src="https://upload.wikimedia.org" class="h-8">
                    </div>
                    <div class="mb-8">
                        <p class="text-sm opacity-80 mb-1">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</p>
                        <p id="card-number" class="text-2xl tracking-widest blur-data">0000 0000 0000 0000</p>
                    </div>
                    <div class="flex gap-8">
                        <div>
                            <p class="text-xs opacity-80 uppercase">–°—Ä–æ–∫</p>
                            <p id="card-date" class="font-bold blur-data">MM/YY</p>
                        </div>
                        <div>
                            <p class="text-xs opacity-80 uppercase">CVV</p>
                            <p id="card-cvv" class="font-bold blur-data">***</p>
                        </div>
                        <div class="ml-auto text-right">
                            <p class="text-xs opacity-80">–ë–∞–ª–∞–Ω—Å</p>
                            <p id="balance-display" class="text-3xl font-bold">0.00 ‚ÇΩ</p>
                        </div>
                    </div>
                    <button onclick="showCardDetails()" class="absolute top-8 right-8 bg-white/20 p-2 rounded-lg backdrop-blur-md text-xs">–ü–æ–∫–∞–∑–∞—Ç—å</button>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="grid grid-cols-3 gap-4 mb-8">
                    <button onclick="openModal('transfer-modal')" class="bg-white p-4 rounded-3xl shadow-sm hover:shadow-md transition text-center">
                        <div class="bg-orange-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2">üí∏</div>
                        <span class="text-sm font-semibold">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</span>
                    </button>
                    <button onclick="openModal('request-modal')" class="bg-white p-4 rounded-3xl shadow-sm hover:shadow-md transition text-center">
                        <div class="bg-orange-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2">üì•</div>
                        <span class="text-sm font-semibold">–ó–∞–ø—Ä–æ—Å–∏—Ç—å</span>
                    </button>
                    <button onclick="openModal('sbp-modal'); startScanner();" class="bg-white p-4 rounded-3xl shadow-sm hover:shadow-md transition text-center">
                        <div class="bg-orange-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2">üì≤</div>
                        <span class="text-sm font-semibold">–°–ë–ü</span>
                    </button>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è -->
            <div class="bg-white rounded-[2rem] p-6 shadow-sm h-fit">
                <h3 class="text-xl font-bold mb-6">–ò—Å—Ç–æ—Ä–∏—è</h3>
                <div id="history-list" class="space-y-4 max-h-[500px] overflow-y-auto">
                    <p class="text-gray-400 text-center py-4">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<!-- –ü–µ—Ä–µ–≤–æ–¥ -->
<div id="transfer-modal" class="modal">
    <div class="bg-white p-8 rounded-3xl w-full max-w-sm m-4">
        <h3 class="text-xl font-bold mb-4">–ü–µ—Ä–µ–≤–æ–¥</h3>
        <input type="text" id="target-card" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –∏–ª–∏ Email" class="w-full p-4 mb-4 border rounded-2xl outline-none focus:border-orange-500">
        <input type="number" id="transfer-amount" placeholder="–°—É–º–º–∞ ‚ÇΩ" class="w-full p-4 mb-6 border rounded-2xl outline-none focus:border-orange-500">
        <button onclick="confirmTransfer()" class="w-full bg-orange-bingus text-white py-4 rounded-full font-bold">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <button onclick="closeModal('transfer-modal')" class="w-full mt-2 text-gray-400 py-2">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<!-- –ó–∞–ø—Ä–æ—Å -->
<div id="request-modal" class="modal">
    <div class="bg-white p-8 rounded-3xl w-full max-w-sm m-4 text-center relative">
        <button onclick="closeModal('request-modal')" class="absolute top-4 right-4 text-2xl">√ó</button>
        <h3 class="text-xl font-bold mb-4">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–µ–Ω—å–≥–∏</h3>
        <div id="request-input-step">
            <input type="number" id="req-amount" placeholder="–°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ? ‚ÇΩ" class="w-full p-4 mb-4 border rounded-2xl outline-none focus:border-orange-500">
            <button onclick="generateRequestQR()" class="w-full bg-orange-bingus text-white py-4 rounded-full font-bold">–°–æ–∑–¥–∞—Ç—å QR</button>
        </div>
        <div id="request-qr-step" class="hidden">
            <div id="qrcode" class="flex justify-center mb-4"></div>
            <p class="text-sm text-gray-500 mb-4">–ü–æ–∫–∞–∂–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é</p>
            <button class="text-orange-bingus font-bold">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
    </div>
</div>

<!-- –°–ë–ü (–°–∫–∞–Ω–µ—Ä) -->
<div id="sbp-modal" class="modal">
    <div class="bg-white p-8 rounded-3xl w-full max-w-sm m-4">
        <h3 class="text-xl font-bold mb-4">–°–∫–∞–Ω–µ—Ä –°–ë–ü</h3>
        <div id="reader" style="width: 100%;"></div>
        <div id="sbp-confirm" class="hidden mt-4 text-center">
            <p class="text-gray-500">–ü–æ–ª—É—á–∞—Ç–µ–ª—å: <span id="sbp-target-name" class="font-bold text-black">-</span></p>
            <p class="text-2xl font-bold my-4" id="sbp-amount-display">0 ‚ÇΩ</p>
            <button id="sbp-pay-btn" class="w-full bg-orange-bingus text-white py-4 rounded-full font-bold">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É</button>
        </div>
        <button onclick="stopScanner(); closeModal('sbp-modal')" class="w-full mt-4 text-gray-400">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ —á–µ–∫–∞ -->
<div id="receipt-modal" class="modal">
    <div class="bg-white p-10 rounded-3xl w-full max-w-xs m-4 text-center">
        <div class="w-20 h-20 bg-green-100 text-green-500 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl">‚úì</div>
        <h3 class="text-2xl font-bold mb-2">–£—Å–ø–µ—à–Ω–æ!</h3>
        <p id="receipt-details" class="text-gray-500 mb-8"></p>
        <button onclick="closeModal('receipt-modal')" class="w-full bg-gray-100 py-3 rounded-xl font-bold">–ì–æ—Ç–æ–≤–æ</button>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com";
    import { getDatabase, ref, set, get, update, onValue, push } from "https://www.gstatic.com";

    const firebaseConfig = {
        apiKey: "AIzaSyDw7fAK6C-HecRqdilBRDmgEcYUgZ8K8Y8",
        authDomain: "bingusbank-e34f4.firebaseapp.com",
        databaseURL: "https://bingusbank-e34f4-default-rtdb.firebaseio.com",
        projectId: "bingusbank-e34f4",
        storageBucket: "bingusbank-e34f4.firebasestorage.app",
        messagingSenderId: "935491412417",
        appId: "1:935491412417:web:c65608262025c5769dcf40"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // --- –õ–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ---
    window.toggleAuth = (isReg) => {
        document.getElementById('login-form').classList.toggle('hidden', isReg);
        document.getElementById('register-form').classList.toggle('hidden', !isReg);
    };

    window.openModal = (id) => document.getElementById(id).classList.add('active');
    window.closeModal = (id) => {
        document.getElementById(id).classList.remove('active');
        if(id === 'sbp-modal') stopScanner();
    };

    // --- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ---
    window.handleRegister = async () => {
        const name = document.getElementById('reg-name').value;
        const email = document.getElementById('reg-email').value;
        const pass = document.getElementById('reg-pass').value;

        try {
            const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
            const user = userCredential.user;
            
            const cardNum = Array.from({length: 16}, () => Math.floor(Math.random() * 10)).join('').replace(/(.{4})/g, '$1 ').trim();
            const cvv = Math.floor(Math.random() * 899) + 100;
            
            await set(ref(db, 'users/' + user.uid), {
                name: name,
                email: email,
                balance: 1000, // –ü–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                card: cardNum,
                cvv: cvv,
                expiry: "12/28"
            });
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ä–µ–µ—Å—Ç—Ä–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
            await set(ref(db, 'cards/' + cardNum.replace(/\s/g, '')), user.uid);
            await set(ref(db, 'emails/' + email.replace(/\./g, ',')), user.uid);
        } catch (e) { alert(e.message); }
    };

    // --- –í—Ö–æ–¥ ---
    window.handleLogin = () => {
        const email = document.getElementById('login-email').value;
        const pass = document.getElementById('login-pass').value;
        signInWithEmailAndPassword(auth, email, pass).catch(e => alert("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞"));
    };

    window.handleLogout = () => signOut(auth);

    // --- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ ---
    onAuthStateChanged(auth, (user) => {
        const loader = document.getElementById('loader');
        const authScreen = document.getElementById('auth-screen');
        const mainScreen = document.getElementById('main-screen');

        if (user) {
            onValue(ref(db, 'users/' + user.uid), (snapshot) => {
                const data = snapshot.val();
                if(!data) return;
                
                document.getElementById('user-name-display').innerText = data.name;
                document.getElementById('balance-display').innerText = data.balance.toLocaleString() + " ‚ÇΩ";
                document.getElementById('card-number').innerText = data.card;
                document.getElementById('card-date').innerText = data.expiry;
                document.getElementById('card-cvv').innerText = data.cvv;
                
                loadHistory(user.uid);
                loader.classList.add('hidden');
                authScreen.classList.add('hidden');
                mainScreen.classList.remove('hidden');
            });
        } else {
            loader.classList.add('hidden');
            mainScreen.classList.add('hidden');
            authScreen.classList.remove('hidden');
        }
    });

    // --- –ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã ---
    window.showCardDetails = () => {
        const pass = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:");
        if (pass) {
            document.getElementById('card-number').classList.add('unblur');
            document.getElementById('card-date').classList.add('unblur');
            document.getElementById('card-cvv').classList.add('unblur');
            setTimeout(() => {
                document.getElementById('card-number').classList.remove('unblur');
                document.getElementById('card-date').classList.remove('unblur');
                document.getElementById('card-cvv').classList.remove('unblur');
            }, 10000);
        }
    };

    // --- –ü–µ—Ä–µ–≤–æ–¥ ---
    window.confirmTransfer = async () => {
        const targetStr = document.getElementById('target-card').value.replace(/\s/g, '');
        const amount = parseFloat(document.getElementById('transfer-amount').value);
        const currentUser = auth.currentUser;

        if(!amount || amount <= 0) return alert("–°—É–º–º–∞?");
        
        const pass = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞:");
        if (!pass) return;

        try {
            // –ò—â–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–æ –∫–∞—Ä—Ç–µ –∏–ª–∏ –ø–æ—á—Ç–µ
            let targetUid = null;
            const snapCard = await get(ref(db, 'cards/' + targetStr));
            if(snapCard.exists()) targetUid = snapCard.val();
            else {
                const snapEmail = await get(ref(db, 'emails/' + targetStr.replace(/\./g, ',')));
                if(snapEmail.exists()) targetUid = snapEmail.val();
            }

            if(!targetUid) throw new Error("–ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω");
            if(targetUid === currentUser.uid) throw new Error("–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–µ–±–µ");

            const mySnap = await get(ref(db, 'users/' + currentUser.uid));
            const myData = mySnap.val();
            
            if(myData.balance < amount) throw new Error("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

            const targetSnap = await get(ref(db, 'users/' + targetUid));
            const targetData = targetSnap.val();

            // –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
            await update(ref(db, 'users/' + currentUser.uid), { balance: myData.balance - amount });
            await update(ref(db, 'users/' + targetUid), { balance: targetData.balance + amount });

            // –ò—Å—Ç–æ—Ä–∏—è
            const tKey = push(ref(db, 'history')).key;
            const log = { amount, from: myData.name, to: targetData.name, date: new Date().toLocaleString() };
            await set(ref(db, `history/${currentUser.uid}/${tKey}`), { ...log, type: 'out' });
            await set(ref(db, `history/${targetUid}/${tKey}`), { ...log, type: 'in' });

            closeModal('transfer-modal');
            showReceipt(`–ü–µ—Ä–µ–≤–æ–¥ ${amount} ‚ÇΩ –ø–æ–ª—É—á–∞—Ç–µ–ª—é ${targetData.name}`);
        } catch (e) { alert(e.message); }
    };

    // --- –ó–∞–ø—Ä–æ—Å –∏ QR (–°–ë–ü) ---
    window.generateRequestQR = () => {
        const amount = document.getElementById('req-amount').value;
        const uid = auth.currentUser.uid;
        const qrData = JSON.stringify({ uid, amount, name: document.getElementById('user-name-display').innerText });
        
        document.getElementById('request-input-step').classList.add('hidden');
        document.getElementById('request-qr-step').classList.remove('hidden');
        
        document.getElementById('qrcode').innerHTML = "";
        new QRCode(document.getElementById("qrcode"), { text: qrData, width: 200, height: 200 });
    };

    // --- –°–∫–∞–Ω–µ—Ä –°–ë–ü ---
    let html5QrCode;
    window.startScanner = () => {
        html5QrCode = new Html5Qrcode("reader");
        html5QrCode.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, (decodedText) => {
            try {
                const data = JSON.parse(decodedText);
                if(data.uid && data.amount) {
                    stopScanner();
                    document.getElementById('reader').classList.add('hidden');
                    document.getElementById('sbp-confirm').classList.remove('hidden');
                    document.getElementById('sbp-target-name').innerText = data.name;
                    document.getElementById('sbp-amount-display').innerText = data.amount + " ‚ÇΩ";
                    
                    document.getElementById('sbp-pay-btn').onclick = () => executeSBP(data.uid, data.amount, data.name);
                }
            } catch(e) {}
        });
    };

    window.stopScanner = () => { if(html5QrCode) html5QrCode.stop(); };

    async function executeSBP(targetUid, amount, targetName) {
        amount = parseFloat(amount);
        const currentUser = auth.currentUser;
        try {
            const mySnap = await get(ref(db, 'users/' + currentUser.uid));
            const myData = mySnap.val();
            if(myData.balance < amount) throw new Error("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");

            const targetSnap = await get(ref(db, 'users/' + targetUid));
            const targetData = targetSnap.val();

            await update(ref(db, 'users/' + currentUser.uid), { balance: myData.balance - amount });
            await update(ref(db, 'users/' + targetUid), { balance: targetData.balance + amount });

            const tKey = push(ref(db, 'history')).key;
            const log = { amount, from: myData.name, to: targetName, date: new Date().toLocaleString(), method: '–°–ë–ü' };
            await set(ref(db, `history/${currentUser.uid}/${tKey}`), { ...log, type: 'out' });
            await set(ref(db, `history/${targetUid}/${tKey}`), { ...log, type: 'in' });

            closeModal('sbp-modal');
            showReceipt(`–û–ø–ª–∞—Ç–∞ –°–ë–ü: ${amount} ‚ÇΩ`);
        } catch(e) { alert(e.message); }
    }

    // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ---
    function showReceipt(text) {
        document.getElementById('receipt-details').innerText = text;
        openModal('receipt-modal');
    }

    function loadHistory(uid) {
        onValue(ref(db, `history/${uid}`), (snap) => {
            const list = document.getElementById('history-list');
            list.innerHTML = "";
            const data = snap.val();
            if(!data) {
                list.innerHTML = '<p class="text-gray-400 text-center py-4">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                return;
            }
            Object.values(data).reverse().forEach(t => {
                const item = document.createElement('div');
                item.className = "flex justify-between items-center p-3 border-b border-gray-50";
                const isOut = t.type === 'out';
                item.innerHTML = `
                    <div>
                        <p class="font-bold text-sm">${isOut ? '–ü–µ—Ä–µ–≤–æ–¥ ' + t.to : '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç ' + t.from}</p>
                        <p class="text-xs text-gray-400">${t.date}</p>
                    </div>
                    <p class="font-bold ${isOut ? 'text-red-500' : 'text-green-500'}">
                        ${isOut ? '-' : '+'}${t.amount} ‚ÇΩ
                    </p>
                `;
                list.appendChild(item);
            });
        });
    }
</script>
</body>
</html>
